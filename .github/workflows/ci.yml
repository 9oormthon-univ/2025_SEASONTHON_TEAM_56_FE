# 워크플로우의 이름
name: Build Check

# 이 워크플로우가 언제 실행될지 정의
on:
  # main 브랜치를 대상으로 하는 Pull Request가 생성되거나 업데이트 될 때
  pull_request:
    branches: [main]

# 실행될 작업(들)을 정의
jobs:
  # 'build'라는 이름의 작업을 정의
  build:
    # 이 작업이 실행될 가상 환경을 지정 (ubuntu 최신 버전)
    runs-on: ubuntu-latest

    # 작업 안에서 실행될 단계(들)을 순서대로 정의
    steps:
      # 1. actions/checkout@v4: PR에 있는 코드를 가상 환경으로 가져오는 단계
      - name: Checkout repository
        uses: actions/checkout@v4

      # 2. actions/setup-node@v4: Node.js 환경을 설정하는 단계
      - name: Set up Node.js
        uses: actions/setup-node@v4
        with:
          node-version: "20.x" # Node.js 20 버전을 사용
          cache: "npm" # npm 의존성 캐싱으로 설치 속도 향상

      # 3. npm ci: package-lock.json을 기반으로 의존성을 정확하고 빠르게 설치
      - name: Install dependencies
        run: npm ci

      # 4. npm run build: Next.js 프로젝트의 빌드 명령어를 실행하여 빌드 성공 여부 확인
      - name: Build project
        run: npm run build
